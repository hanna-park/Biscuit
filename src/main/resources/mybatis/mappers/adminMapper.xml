<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="adminMapper">
  
	<select id="adminLocSelect" parameterType="CinemaVO" resultType="CinemaVO">
    select cinema_name
    from cinema
    where cinema_loc = #{cinema_loc}
	</select>
	
	
	<insert id="timeInfoInsertA" parameterType="TimeInfoVO">
		insert all
		into timeinfo
		values (timeinfo_seq.nextval,
		#{theater_num}, 
		#{movieInfo_num},
		to_date(#{timeInfo_date}, 'yy-mm-dd'),
		to_date((select concat(#{timeInfo_date},' 08:00') from dual), 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date((select concat(#{timeInfo_date},' 08:00') from dual), 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +1 ,
		#{theater_num}, 
		#{movieInfo_num},
		to_date(#{timeInfo_date}, 'yy-mm-dd'),
		to_date((select concat(#{timeInfo_date},' 11:00') from dual), 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date((select concat(#{timeInfo_date},' 11:00') from dual), 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +2,
		#{theater_num}, 
		#{movieInfo_num},
		to_date(#{timeInfo_date}, 'yy-mm-dd'),
		to_date((select concat(#{timeInfo_date},' 14:00') from dual), 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date((select concat(#{timeInfo_date},' 14:00') from dual), 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +3,
		#{theater_num}, 
		#{movieInfo_num},
		to_date(#{timeInfo_date}, 'yy-mm-dd'),
		to_date((select concat(#{timeInfo_date},' 17:00') from dual), 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date((select concat(#{timeInfo_date},' 17:00') from dual), 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +4,
		#{theater_num}, 
		#{movieInfo_num},
		to_date(#{timeInfo_date}, 'yy-mm-dd'),
		to_date((select concat(#{timeInfo_date},' 20:00') from dual), 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date((select concat(#{timeInfo_date},' 20:00') from dual), 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num}
		),'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		select * from dual
	</insert>
  	
	
	

  </mapper>