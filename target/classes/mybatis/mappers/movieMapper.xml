<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="movieMapper">
  
  	<select id="movieTitleSelect" resultType="MovieInfoVO">
  		select movieinfo_num, movieinfo_title
        from movieinfo
  	</select>
  
  
  	<select id="movieLocSelect" resultType="CinemaVO">
  		select DISTINCT cinema_loc, cinema_locnum
  		from cinema
		order by cinema_locnum asc
  	</select>
  	
  	<select id="movieCinemaSelect" parameterType="CinemaVO" resultType="CinemaVO">
  	    select cinema_num, cinema_name
        from cinema
        where cinema_loc = #{cinema_loc}
  	</select>
  	
  	<!-- A -->
  	<insert id="timeInfoInsert" parameterType="TimeInfoVO">
	insert into timeinfo
	values (timeinfo_seq.nextval,
	
	#{theater_num}, 
	#{movieInfo_num},
	
	to_date('19-12-01', 'yy-mm-dd'),
	to_date('19-12-01 20:00', 'yy-mm-dd HH24:MI'),
	to_date((select to_char(to_date('19-12-01 20:00', 'yy-mm-dd hh24:mi') +
	(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
	
	= #{movieInfo_num})
	
	,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))
  	</insert>

	<!-- A -->
	<insert id="timeInfoInsertA" parameterType="TimeInfoVO">
		insert all
		into timeinfo
		values (timeinfo_seq.nextval,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 08:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 08:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +1 ,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 11:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 11:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +2,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 14:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 14:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +3,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 17:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 17:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +4,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 20:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 20:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num}
		),'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		select * from dual
	</insert>
  	
  	
  	
  	<!-- B -->
<insert id="timeInfoInsertB" parameterType="TimeInfoVO">
		insert all
		into timeinfo
		values (timeinfo_seq.nextval,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 09:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 09:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +1 ,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 12:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 12:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +2,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 15:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 15:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +3,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 18:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 18:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +4,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 21:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 21:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num}
		),'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		select * from dual
	</insert>  	
  	
  	
  	<!-- C -->
<insert id="timeInfoInsertC" parameterType="TimeInfoVO">
		insert all
		into timeinfo
		values (timeinfo_seq.nextval,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 10:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 10:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +1 ,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 13:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 13:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +2,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 16:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 16:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +3,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 19:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 19:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num})
		,'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		into timeinfo
		values (timeinfo_seq.nextval +4,
		#{theater_num}, 
		#{movieInfo_num},
		to_date('19-12-01', 'yy-mm-dd'),
		to_date('19-12-01 22:00', 'yy-mm-dd HH24:MI'),
		to_date((select to_char(to_date('19-12-01 22:00', 'yy-mm-dd hh24:mi') +
		(1/24/60)*(select movieinfo_time from movieinfo where movieinfo_num
		= #{movieInfo_num}
		),'yy-mm-dd HH24:MI') from dual), 'yy-mm-dd HH24:MI'))

		select * from dual
	</insert>  
  	
  	<update id="seq_plus">
  		alter sequence timeinfo_seq increment by +5
  	</update>
  	
  	
  	
  
  
  </mapper>